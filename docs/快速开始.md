# ðŸš€ å¿«é€Ÿå¼€å§‹ - 5åˆ†é’Ÿä½“éªŒ

## ðŸŽ¯ æœ€å¿«éƒ¨ç½²è·¯å¾„

åªéœ€3ä¸ªæ­¥éª¤ï¼Œ5åˆ†é’Ÿå®Œæˆï¼š

---

## ç¬¬1æ­¥ï¼šæ³¨å†ŒSupabaseï¼ˆ2åˆ†é’Ÿï¼‰

1. è®¿é—® https://supabase.com
2. ç‚¹å‡» "Start your project"
3. GitHubç™»å½•ï¼ˆ1ç§’ï¼‰
4. æ–°å»ºé¡¹ç›®ï¼š
   - Name: `my-chat`
   - Password: `ç”Ÿæˆå¹¶ä¿å­˜`
   - Region: `é€‰æœ€è¿‘çš„`
5. ç‚¹å‡» "Create" ç­‰å¾…2åˆ†é’Ÿ

âœ… **è®°å½•ä¸‹æ¥ï¼š**
- Project URL: `https://xxx.supabase.co`
- anon key: `eyJ...`

---

## ç¬¬2æ­¥ï¼šé…ç½®æ•°æ®åº“ï¼ˆ2åˆ†é’Ÿï¼‰

1. ç‚¹å‡»å·¦ä¾§ **SQL Editor**
2. ç‚¹å‡» **New query**
3. å¤åˆ¶ç²˜è´´ `supabase/database-init.sql` çš„å†…å®¹
4. ç‚¹å‡» **Run**
5. ç­‰å¾…10ç§’

âœ… **çœ‹åˆ°æˆåŠŸæ¶ˆæ¯ï¼š**
```
âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸï¼
```

---

## ç¬¬3æ­¥ï¼šæµ‹è¯•ï¼ˆ1åˆ†é’Ÿï¼‰

### éªŒè¯æ•°æ®åº“

ç‚¹å‡»å·¦ä¾§ **Table Editor**ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
- users âœ…
- messages âœ…
- online_users âœ…

### åˆ›å»ºæµ‹è¯•ç”¨æˆ·

åœ¨ SQL Editor æ‰§è¡Œï¼š

```sql
-- æ’å…¥æµ‹è¯•ç”¨æˆ·
INSERT INTO users (username, password_hash, gender, avatar_url, location)
VALUES (
  'test_user',
  '$2a$10$test',
  'male',
  'https://api.dicebear.com/7.x/avataaars/svg?seed=test',
  'åŒ—äº¬'
);

-- æŸ¥çœ‹ç”¨æˆ·
SELECT * FROM users;
```

âœ… **åº”è¯¥çœ‹åˆ°1æ¡è®°å½•**

---

## ðŸŽ‰ å®Œæˆï¼

ä½ çŽ°åœ¨æœ‰äº†ï¼š
- âœ… å®Œæ•´çš„PostgreSQLæ•°æ®åº“
- âœ… æ‰€æœ‰å®‰å…¨è§„åˆ™ï¼ˆRLSï¼‰
- âœ… ä¼˜åŒ–çš„ç´¢å¼•
- âœ… æ•°æ®åº“å‡½æ•°

---

## ðŸ“± ä¸‹ä¸€æ­¥ï¼šéƒ¨ç½²å‰ç«¯

### æ–¹æ¡ˆAï¼šåœ¨çº¿æµ‹è¯•ï¼ˆæœ€å¿«ï¼‰

ä½¿ç”¨Supabaseçš„Table Editorç›´æŽ¥æ“ä½œæ•°æ®ï¼š

1. ç‚¹å‡» **Table Editor** > **users**
2. ç‚¹å‡» **Insert row**
3. æ·»åŠ æµ‹è¯•æ•°æ®
4. å®žæ—¶æŸ¥çœ‹æ•ˆæžœ

### æ–¹æ¡ˆBï¼šæœ¬åœ°å¼€å‘

```bash
# 1. å…‹éš†ä»£ç 
git clone [ä½ çš„ä»“åº“]

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®çŽ¯å¢ƒå˜é‡
echo "NEXT_PUBLIC_SUPABASE_URL=ä½ çš„URL" > .env.local
echo "NEXT_PUBLIC_SUPABASE_ANON_KEY=ä½ çš„KEY" >> .env.local

# 4. å¯åŠ¨
npm run dev
```

è®¿é—® http://localhost:3000

### æ–¹æ¡ˆCï¼šä¸€é”®éƒ¨ç½²åˆ°Vercel

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=ä½ çš„ä»“åº“)

ç‚¹å‡»æŒ‰é’®ï¼Œè¾“å…¥çŽ¯å¢ƒå˜é‡ï¼Œå®Œæˆï¼

---

## ðŸ” å®‰å…¨æ€§

å·²é…ç½®çš„å®‰å…¨æŽªæ–½ï¼š

âœ… Row Level Securityï¼ˆRLSï¼‰
- ç”¨æˆ·åªèƒ½è¯»å†™è‡ªå·±çš„æ•°æ®
- é‡‘å¸åªèƒ½æœåŠ¡ç«¯ä¿®æ”¹
- æ¶ˆæ¯åªèƒ½æŸ¥çœ‹ï¼Œä¸èƒ½å‰ç«¯åˆ›å»º

âœ… æ•°æ®éªŒè¯
- æ¶ˆæ¯é•¿åº¦é™åˆ¶ï¼ˆ500å­—ï¼‰
- ç”¨æˆ·åæ ¼å¼æ£€æŸ¥
- æ€§åˆ«æžšä¸¾é™åˆ¶

âœ… ç´¢å¼•ä¼˜åŒ–
- chat_idç´¢å¼•
- sender/receiverç´¢å¼•
- åœ¨çº¿çŠ¶æ€ç´¢å¼•

---

## ðŸ’¡ å¿«é€Ÿæµ‹è¯•API

### ä½¿ç”¨Postman/curl

```bash
# èŽ·å–åœ¨çº¿ç”¨æˆ·ï¼ˆéœ€è¦è®¤è¯ï¼‰
curl https://ä½ çš„é¡¹ç›®.supabase.co/rest/v1/online_users \
  -H "apikey: ä½ çš„anon_key" \
  -H "Authorization: Bearer ä½ çš„token"

# æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
curl https://ä½ çš„é¡¹ç›®.supabase.co/rest/v1/users \
  -H "apikey: ä½ çš„anon_key"
```

---

## ðŸ“Š ç›‘æŽ§

å®žæ—¶æŸ¥çœ‹ï¼š

1. **Database Size**
   - Settings > Usage
   - åº”è¯¥ < 1MB

2. **API Requests**
   - åº”è¯¥çœ‹åˆ°åˆå§‹è¯·æ±‚
   - æ¯æ¬¡æŸ¥è¯¢éƒ½ä¼šè®°å½•

3. **Edge Functions**
   - è¿˜æœªéƒ¨ç½²ï¼Œæ‰€ä»¥ä¸º0
   - ä¸‹ä¸€æ­¥éƒ¨ç½²Functions

---

## â“ é‡åˆ°é—®é¢˜ï¼Ÿ

### æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ï¼Ÿ

**æ£€æŸ¥ï¼š**
```sql
-- æŸ¥çœ‹é”™è¯¯
SHOW ERRORS;

-- é‡æ–°è¿è¡Œ
DROP TABLE IF EXISTS users CASCADE;
-- ç„¶åŽé‡æ–°è¿è¡Œinit.sql
```

### çœ‹ä¸åˆ°è¡¨ï¼Ÿ

**åˆ·æ–°ï¼š**
- Ctrl + F5ï¼ˆWindowsï¼‰
- Cmd + Shift + Rï¼ˆMacï¼‰

### RLSé˜»æ­¢è®¿é—®ï¼Ÿ

**æš‚æ—¶ç¦ç”¨æµ‹è¯•ï¼š**
```sql
ALTER TABLE users DISABLE ROW LEVEL SECURITY;
-- æµ‹è¯•å®Œè®°å¾—é‡æ–°å¯ç”¨ï¼
```

---

## ðŸŽ¯ ä¸‹ä¸€æ­¥

### ç«‹å³å¯åšï¼š
1. âœ… åœ¨Table Editoræ‰‹åŠ¨æ·»åŠ æµ‹è¯•æ•°æ®
2. âœ… å°è¯•å®žæ—¶è®¢é˜…åŠŸèƒ½
3. âœ… æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„API

### æŽ¥ä¸‹æ¥ï¼š
1. éƒ¨ç½²Edge Functionsï¼ˆ10åˆ†é’Ÿï¼‰
2. éƒ¨ç½²å‰ç«¯åˆ°Vercelï¼ˆ5åˆ†é’Ÿï¼‰
3. æµ‹è¯•å®Œæ•´æµç¨‹

### å­¦ä¹ èµ„æºï¼š
- Supabaseæ–‡æ¡£: https://supabase.com/docs
- SQLæ•™ç¨‹: å†…ç½®åœ¨Dashboard
- RLSæŒ‡å—: https://supabase.com/docs/guides/auth/row-level-security

---

## ðŸŽ ä½ å·²ç»æ‹¥æœ‰äº†

åœ¨çŸ­çŸ­5åˆ†é’Ÿå†…ï¼Œä½ èŽ·å¾—äº†ï¼š

âœ… **PostgreSQLæ•°æ®åº“**
- 500MBå­˜å‚¨
- å®Œæ•´çš„å…³ç³»åž‹æ•°æ®åº“
- è‡ªåŠ¨å¤‡ä»½

âœ… **å®žæ—¶API**
- REST APIè‡ªåŠ¨ç”Ÿæˆ
- GraphQLï¼ˆå¯é€‰ï¼‰
- å®žæ—¶è®¢é˜…

âœ… **å®‰å…¨ä¿æŠ¤**
- Row Level Security
- èº«ä»½éªŒè¯
- HTTPSåŠ å¯†

âœ… **å®Œå…¨å…è´¹**
- æ— éœ€ä¿¡ç”¨å¡
- æ°¸ä¹…ä½¿ç”¨
- å¯å‡çº§

---

**æ­å–œï¼ç»§ç»­æŸ¥çœ‹ README.md å®Œæˆå®Œæ•´éƒ¨ç½²ï¼** ðŸŽ‰
